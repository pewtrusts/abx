!function(e){function t(t){for(var i,s,o=t[0],u=t[1],l=t[2],d=0,p=[];d<o.length;d++)s=o[d],a[s]&&p.push(a[s][0]),a[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;r.push([5,1]),n()}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GTMPush=function(e){dataLayer&&dataLayer.push({event:"Interactive Click",eventData:e})},t.publishWindowResize=function(e){var t;window.addEventListener("resize",function(){t||(t=setTimeout(function(){e.setState("resize",[document.documentElement.clientWidth,document.documentElement.clientHeight]),t=null},350))},!1)};t.FadeInText=(HTMLElement.prototype.fadeOutContent=function(){this.classList.add("no-opacity")},void(HTMLElement.prototype.fadeInContent=function(e,t){var n=this,i=t||0;return t&&(this.style.transition="opacity "+t+"s ease-in-out"),new Promise(function(t){var a=window.getComputedStyle(n).getPropertyValue("transition-duration")||i,r=1e3*parseFloat(a);n.fadeOutContent(),setTimeout(function(){n.innerHTML=e,n.classList.remove("no-opacity"),t(!0)},r)})})),t.StringHelpers=(String.prototype.cleanString=function(){return this.replace(/[ \/]/g,"-").replace(/['"”’“‘,.!?;()&:]/g,"").toLowerCase()},String.prototype.removeUnderscores=function(){return this.replace(/_/g," ")},String.prototype.undoCamelCase=function(){return this.replace(/([A-Z])/g," $1").toLowerCase()},String.prototype.trunc=String.prototype.trunc||function(e,t){if(this.length<=e)return this;var n=this.substr(0,e-1);return(t?n.substr(0,n.lastIndexOf(" ")):n)+"..."},void(String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t})),t.DOMHelpers={c:function(e){if(-1!==e.indexOf(".")||-1!==e.indexOf("#")){var t=e.match(/\.([^#.]*)/g)||[],n=e.match(/#([^.]*)/),i=e.match(/^([^.#]+)/),a=document.createElement(i[0]);return t.forEach(function(e){a.classList.add(e.replace(".",""))}),null!==n&&a.setAttribute("id",n[1]),a}return document.createElement(e)},q:function(e){return document.querySelector(e)},qa:function(e){return document.querySelectorAll(e)}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0);var r=function(){function e(t,n){var i=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t)throw'First parameter must be a string referencing the CSS-like selector of the element to be created \n                    ("div#divID.divClass").';this.selector=t,this.model=n.model,this.parent=n.parent,this.renderToSelector=n.renderToSelector,this.container=a.DOMHelpers.q(this.renderToSelector),this.children=n.children,this.rerender=n.rerenderOnDataMismatch&&n.model.isMismatched,this.data=n.data,this.el=this.prerender(arguments),this.isReady=new Promise(function(e,t){i.resolve=e,i.reject=t})}return i(e,[{key:"prerender",value:function(){var e=a.DOMHelpers.q(this.selector);return e&&!this.rerender?(this.prerendered=!0,e):e?(e.innerHTML="",e):a.DOMHelpers.c(this.selector)}},{key:"init",value:function(){}}]),e}();t.default=r},,function(e,t,n){"use strict";n(0);var i,a=n(6),r=(i=a)&&i.__esModule?i:{default:i};n(23);var s=new r.default("#pew-app",{needsRouter:!1});window.IS_PRERENDERING&&s.prerender(),s.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=h(n(7)),r=n(1),s=n(0),o=h(n(9)),u=h(n(10)),l=h(n(17)),c=h(n(18)),d=h(n(20)),p=h(n(21)),f=h(n(22));function h(e){return e&&e.__esModule?e:{default:e}}(0,s.publishWindowResize)(r.stateModule);var v={},y=[],m=2014;function b(){var e=this,t="";return window.IS_PRERENDERING||(t="/~/media/data-visualizations/interactives/2019/ABX/"),new Promise(function(n,i){var r=e.el;a.default.parse(t+o.default,{download:!0,dynamicTyping:!0,header:!0,fastMode:!1,skipEmptyLines:!0,beforeFirstChunk:function(e){var t=e.hashCode();window.IS_PRERENDERING?r.setAttribute("data-data-hash",t):t.toString()!==r.getAttribute("data-data-hash")&&(r.setAttribute("data-data-mismatch",!0),v.isMismatched=!0)},complete:function(t){y.length=0,v.years=[];for(var i=!0,a=0;i;)t.data[0].hasOwnProperty(m+a)?v.years.push(m+a):i=!1,a++;v.unnestedData=t.data.map(function(e){return e.id="drug-"+e.id,v.years.forEach(function(t){e[t]=[0].map(function(){return{column:parseInt(e[t]),isDiscontinued:-1!==e[t].toString().indexOf("d")}})}),e}),v.data=v.years.map(function(e){return{year:e,observations:[0].map(function(t){return[1,2,3,4,5].map(function(n){return{phase:n,values:v.unnestedData.filter(function(i){return i[e][t].column===n})}})})}});var r=[],s=[];v.data.forEach(function(e){e.observations.forEach(function(t,n){t.forEach(function(t){r.push(t.values.filter(function(t){return!0!==t[e.year][n].isDiscontinued}).length),s.push(t.values.filter(function(t){return!0===t[e.year][n].isDiscontinued}).length)})})}),v.maxActive=Math.max.apply(Math,r),v.maxDiscontinued=Math.max.apply(Math,s),y.push(e.createComponent(v,u.default,"div#viz-view",{renderToSelector:"#abx-visualization",rerenderOnDataMismatch:!0,parent:e}),e.createComponent(v,l.default,"div#visually-hidden-view",{renderToSelector:"#visually-hidden-container",rerenderOnDataMismatch:!0,parent:e})),n(!0)},error:function(e){i(e)}})})}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),i(t,[{key:"prerender",value:function(){this.el.insertAdjacentHTML("beforeend",d.default),document.querySelector("#intro").insertAdjacentHTML("afterbegin",p.default),document.querySelector("#abx-notes").insertAdjacentHTML("afterbegin",f.default),b.call(this).then(function(){y.forEach(function(e){e.container.appendChild(e.el)})})}},{key:"init",value:function(){var e=this;(function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),b.call(this).then(function(){y.forEach(function(t){t.init(e)})})}}]),t}();t.default=g},,,function(e,t,n){e.exports=n.p+"data/abx-data.csv?v=eeba4a"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=c(n(3)),r=c(n(11)),s=n(1),o=c(n(12)),u=c(n(14));n(16);var l=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var d=[["Phase 1","P1"],["Phase 2","P2"],["Phase 3","P3"],["Application","NDA"],["Approved","&#x2713"]],p=1200,f=!0,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"prerender",value:function(){var e=this;this.minUnitDimension=30,this.headerHeight=45,this.unitPadding=2,this.headers=d,this.phaseMembers=[0,1].map(function(){return[0].concat(d).map(function(t){return{active:0===t?e.model.unnestedData.map(function(e){return e.id}):[],discontinued:[]}})}),this.heightNeeded=(this.model.maxActive+this.model.maxDiscontinued+1)*(this.minUnitDimension+this.unitPadding)+this.headerHeight+this.unitPadding+200;var n=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prerender",this).call(this);if(this.prerendered&&!this.rerender)return n;function i(e){for(var t=0;t<5;t++){var n=document.createElement("div");n.classList.add(r.default.column);for(var i=e.name===r.default.activeContainer?this.model.maxActive:this.model.maxDiscontinued,a=0;a<i;a++){var s=document.createElement("div");s.classList.add(r.default.drug,r.default.drugEmpty),n.appendChild(s)}e.appendChild(n)}}var a=document.createElement("div");a.classList.add(r.default.controlContainer);var s=document.createElement("button");s.classList.add(r.default.playButton),s.type="button",s.title="Play",a.appendChild(s),this.model.years.forEach(function(e,t){var n=document.createElement("button");n.classList.add(r.default.yearButton,""+(0===t?r.default.yearButtonActive:"nope")),n.type="button",n.value=e,n.textContent=e,a.appendChild(n)});var o=document.createElement("div");o.classList.add(r.default.inputWrapper);var u=document.createElement("input");u.classList.add("js-animate-checkbox"),u.setAttribute("type","checkbox"),u.setAttribute("checked","checked"),u.id="toggle-animate-on-off";var l=document.createElement("label");l.classList.add(r.default.inputLabel),l.setAttribute("for","toggle-animate-on-off"),l.textContent="Animate change",o.appendChild(u),o.appendChild(l),a.appendChild(o),n.appendChild(a);var c=document.createElement("div");c.classList.add(r.default.container),n.appendChild(c);var p=document.createElement("div");p.classList.add(r.default.activeContainer),p.name=r.default.activeContainer,c.appendChild(p);var f=document.createElement("div");f.classList.add(r.default.headerContainer),f.name=r.default.headerContainer,d.forEach(function(e){var t=document.createElement("div");t.classList.add(r.default.headerDiv),t.innerHTML='<span class="'+r.default.phaseFull+'">'+e[0].toUpperCase()+'</span><span class="'+r.default.phaseAbbr+'">'+e[1]+"</span>",f.appendChild(t)}),c.appendChild(f);var h=document.createElement("div");return h.classList.add(r.default.discontinuedContainer),h.name=r.default.discontinuedContainer,c.appendChild(h),i.call(this,p),i.call(this,h),n}},{key:"populatePlaceholders",value:function(e,t){var n=this;var i=document.querySelector("."+r.default.activeContainer),a=document.querySelector("."+r.default.discontinuedContainer);this.phaseMembers[0]=JSON.parse(JSON.stringify(this.phaseMembers[1])),[i,a].forEach(function(i,a){var s=0!==a;n.model.data[e].observations[t].forEach(function(o,u){function l(e){return this.phaseMembers[1][u+1][s?"discontinued":"active"].indexOf(e)}var c=o.values.filter(function(i){return 0===a?!i[n.model.years[e]][t].isDiscontinued:i[n.model.years[e]][t].isDiscontinued}).sort(function(e,t){return void 0===n.previousStatuses?e.id-t.id:n.previousStatuses[e.id]||n.previousStatuses[t.id]?n.previousStatuses[e.id]?n.previousStatuses[t.id]?n.previousStatuses[e.id].column===u+1&&n.previousStatuses[e.id].isDiscontinued===s?n.previousStatuses[t.id].column===u+1&&n.previousStatuses[t.id].isDiscontinued===s?l.call(n,e.id)<l.call(n,t.id)?-1:1:-1:n.previousStatuses[t.id].column===u+1&&n.previousStatuses[t.id].isDiscontinued===s?1:n.previousStatuses[e.id].column===u+1?n.previousStatuses[t.id].column===u+1&&n.previousStatuses[t.id].isDiscontinued!==s?e.id-t.id:n.previousStatuses[t.id].column===u+1?1:-1:n.previousStatuses[t.id].column===u+1?1:n.previousStatuses[e.id].column>n.previousStatuses[t.id].column?-1:n.previousStatuses[e.id].column<n.previousStatuses[t.id].column?1:n.previousStatuses[e.id].isDiscontinued===s&&n.previousStatuses[t.id].isDiscontinued!==s?-1:n.previousStatuses[t.id].isDiscontinued===s&&n.previousStatuses[e.id].isDiscontinued!==s?1:e.id-t.id:-1:1:e.id-t.id}),d=i.querySelectorAll("."+r.default.column)[u];n.phaseMembers[1][u+1][0===a?"active":"discontinued"].length=0,c.forEach(function(t,i){!function(t,n,i,a,s){t.id=n.id,t.classList.remove(r.default.drugEmpty),t.classList.add(""+(n.gramNegative?r.default.gramNegative:"nope"),""+(n.novel?r.default.novel:"nope"),""+(n.urgent?r.default.urgent:"nope"),""+(a&&a[n.id]&&a[n.id].isDiscontinued&&!n[s.years[e]].isDiscontinued?r.default.wasDiscontinued:"nope")),1===i&&t.classList.add(r.default.isDiscontinued),t.setAttribute("data-tippy-content","<strong>"+n.name+"</strong><br />"+n.company)}(d.querySelectorAll("."+r.default.drug)[i],t,a,n.previousStatuses,n.model),n.phaseMembers[1][u+1][0===a?"active":"discontinued"].push(t.id)}),n.phaseMembers[1][0].active=n.model.unnestedData.filter(function(e){return 0===e[+n.currentYear][n.currentObservation].column}).map(function(e){return e.id})})})}},{key:"setYearState",value:function(e,t){var n=s.stateModule.getState("year");n&&!t&&this.recordStatuses(n[0],n[2]),s.stateModule.setState("year",e),this.currentYear=e[0],this.currentObservation=e[2]}},{key:"init",value:function(){o.default.setSubs([["resize",this.checkHeight.bind(this)],["year",this.update.bind(this)]]),this.setYearState([this.model.years[0],null,0]),this.nonEmptyDrugs=document.querySelectorAll("."+r.default.drug+":not(."+r.default.drugEmpty+")"),this.checkHeight(),this.initializeYearButtons(),this.initializeAnimateOnOff(),this.initializePlayButton()}},{key:"initializeAnimateOnOff",value:function(){this.animateYears=!0;var e=document.querySelector(".js-animate-checkbox"),t=function(e){e.checked?((0,l.GTMPush)("ABXAnimation|ToggleAnimation|On"),this.animateYears=!0):((0,l.GTMPush)("ABXAnimation|ToggleAnimation|Off"),this.animateYears=!1)}.bind(this);e.addEventListener("change",function(){t(this)})}},{key:"initializePlayButton",value:function(){this.playYearsBind=this.playYears.bind(this),document.querySelector("."+r.default.playButton).addEventListener("click",this.playYearsBind)}},{key:"pausePlay",value:function(){document.querySelector("."+r.default.yearButtonPrevious)&&document.querySelector("."+r.default.yearButtonPrevious).classList.remove(r.default.yearButtonPrevious),this.playBtn.blur(),this.playBtn.removeEventListener("click",this.pausePlayBind),s.stateModule.setState("isPaused",!0),this.playBtn.classList.add(r.default.willPause)}},{key:"disableYearButtons",value:function(){this.yearButtons=this.yearButtons||document.querySelectorAll("."+r.default.yearButton),this.yearButtons.forEach(function(e){e.setAttribute("disabled","disabled")})}},{key:"disablePlayButton",value:function(){this.playBtn=this.playBtn||document.querySelector("."+r.default.playButton),this.playBtn.setAttribute("disabled","disabled")}},{key:"enablePlayButton",value:function(){this.playBtn=this.playBtn||document.querySelector("."+r.default.playButton),this.playBtn.removeAttribute("disabled")}},{key:"enableYearButtons",value:function(){this.yearButtons=this.yearButtons||document.querySelectorAll("."+r.default.yearButton),this.yearButtons.forEach(function(e){e.removeAttribute("disabled")})}},{key:"playYears",value:function(e){var t=this;"reciprocal"===e?(0,l.GTMPush)("ABXAnimation|Replay"):(0,l.GTMPush)("ABXAnimation|Play");var n=this.animateYears?0:.625*p;s.stateModule.setState("isPaused",!1),s.stateModule.setState("isBackward",!1),this.disableYearButtons(),this.playBtn=this.playBtn||document.querySelector("."+r.default.playButton),this.playBtn.blur(),"reciprocal"!==e&&this.showPauseOption();var i=s.stateModule.getState("year")[0];if(this.model.years.indexOf(+i)===this.model.years.length-1){var a=this.animateYears?p:.625*p;this.removeReplayOption(),f=!0,this.clearAttributesAndDetails(),this.setYearState([this.model.years[0],null,0],!0),setTimeout(function(){t.playYears("reciprocal")},a)}else new Promise(function(e){s.stateModule.getState("isPaused")?(t.enableYearButtons(),e(!1)):e(!0)}).then(function(e){s.stateModule.getState("isPaused")||!0!==e||function e(){var t=this;if(s.stateModule.getState("isPaused"))return this.enableYearButtons(),void this.removePauseOption();++i<=this.model.years[this.model.years.length-1]?new Promise(function(e){t.setYearState([i,e,0])}).then(function(){setTimeout(function(){e.call(t)},n)}):(this.showReplayOption.call(this),this.enableYearButtons())}.call(t)})}},{key:"showReplayOption",value:function(){this.replayBtn=this.replayBtn||document.querySelector("."+r.default.playButton),this.replayBtn.removeEventListener("click",this.pausePlayBind),this.replayBtn.addEventListener("click",this.playYearsBind),this.replayBtn.classList.add(r.default.replay),this.replayBtn.classList.remove(r.default.pause),this.replayBtn.classList.remove(r.default.willPause),this.replayBtn.title="Replay"}},{key:"showPauseOption",value:function(){this.replayBtn=this.replayBtn||document.querySelector("."+r.default.playButton),this.pausePlayBind=this.pausePlay.bind(this),this.removeReplayOption(),this.replayBtn.removeEventListener("click",this.playYearsBind),this.replayBtn.addEventListener("click",this.pausePlayBind),this.replayBtn.classList.add(r.default.pause),this.replayBtn.classList.remove(r.default.replay),this.replayBtn.title="Pause"}},{key:"removePauseOption",value:function(){this.replayBtn=this.replayBtn||document.querySelector("."+r.default.playButton),this.replayBtn.removeEventListener("click",this.pausePlayBind),this.replayBtn.addEventListener("click",this.playYearsBind),this.replayBtn.classList.remove(r.default.pause),this.replayBtn.classList.remove(r.default.willPause),this.replayBtn.title="Play"}},{key:"removeReplayOption",value:function(){this.replayBtn=this.replayBtn||document.querySelector("."+r.default.playButton),this.replayBtn.classList.remove(r.default.replay)}},{key:"checkHeight",value:function(){window.innerHeight<this.heightNeeded?document.body.classList.add(r.default.squat):document.body.classList.remove(r.default.squat),function(){var e=document.documentElement,t=Math.floor((this.heightNeeded-this.unitPadding-this.headerHeight)*(this.maxActive/(this.maxActive+this.maxDiscontinued)));e.style.setProperty("--unit-dimension",this.minUnitDimension+"px"),e.style.setProperty("--header-height",this.headerHeight+"px"),e.style.setProperty("--max-container-height",this.heightNeeded+"px"),e.style.setProperty("--active-max-height",t+"px"),e.style.setProperty("--discontinued-max-height",Math.floor(this.heightNeeded-t-this.headerHeight)+"px")}.call(this)}},{key:"initializeYearButtons",value:function(){var e=this;document.querySelectorAll("."+r.default.yearButton).forEach(function(t){var n=e;t.addEventListener("click",function(){var e=this,t=s.stateModule.getState("year")[0];t!=this.value&&((0,l.GTMPush)("ABXAnimation|Year|"+this.value),s.stateModule.setState("isPaused",!1),this.blur(),n.disablePlayButton(),n.removeReplayOption(),+this.value>+t?(s.stateModule.setState("isBackward",!1),new Promise(function(){n.setYearState([e.value,null,0])})):(s.stateModule.setState("isBackward",!0),new Promise(function(){n.setYearState([e.value,null,0])})))})})}},{key:"update",value:function(e,t){document.querySelector("."+r.default.yearButtonActive).classList.remove(r.default.yearButtonActive,r.default.observation,r.default.observation0,r.default.observation1),document.querySelector('button[value="'+t[0]+'"]').classList.add(r.default.yearButtonActive),this.FLIP(parseInt(t[0]),t[1],t[2]),this.updateText()}},{key:"updateText",value:function(){var e=this.phaseMembers[1][this.phaseMembers[1].length-1].active.length,t=this.phaseMembers[1].reduce(function(e,t){return e+t.discontinued.length},0),n=document.querySelector("#total-approved"),i=document.querySelector("#total-discontinued"),a=s.stateModule.getState("year")[0],r=document.querySelector("#abx-totals");+a>this.model.years[0]?r.classList.add("is-subsequent"):r.classList.remove("is-subsequent"),n.innerHTML!=e&&document.querySelector("#total-approved").fadeInContent(e),i.innerHTML!=t&&document.querySelector("#total-discontinued").fadeInContent(t)}},{key:"FLIP",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.recordFirstPositions(),this.clearAttributesAndDetails(),this.populatePlaceholders(this.model.years.indexOf(e),n),this.nonEmptyDrugs=document.querySelectorAll("."+r.default.drug+":not(."+r.default.drugEmpty+")"),(0,u.default)(this.nonEmptyDrugs,{arrow:!0,distance:3});var i=s.stateModule.getState("isBackward");!1!==this.animateYears&&0==i&&this.invertPositions(),this.playAnimation(t,this.animateYears&&!i)}},{key:"recordStatuses",value:function(e,t){this.previousStatuses=this.model.data[this.model.years.indexOf(+e)].observations[t].reduce(function(n,i){return i.values.forEach(function(i){n[i.id]={column:i[e][t].column,isDiscontinued:i[e][t].isDiscontinued}}),n},{})}},{key:"recordFirstPositions",value:function(){this.firstPositions=Array.from(document.querySelectorAll("."+r.default.drug+":not("+r.default.drugEmpty+")")).reduce(function(e,t){return e[t.id]=t.getBoundingClientRect(),e},{})}},{key:"clearAttributesAndDetails",value:function(){this.nonEmptyDrugs.forEach(function(e){e.className=r.default.drug+" "+r.default.drugEmpty,e.id="",e.setAttribute("data-tippy-content",""),e._tippy&&(e.removeAttribute("tabindex"),e._tippy.destroy())})}},{key:"invertPositions",value:function(){var e=this;this.nonEmptyDrugs.forEach(function(t){t.style.transitionDuration="0s";var n=t.getBoundingClientRect(),i=e.firstPositions[t.id]?e.firstPositions[t.id].top-n.top:-3e3,a=e.firstPositions[t.id]?e.firstPositions[t.id].left-n.left:-3e3;t.style.transform="translate("+a+"px, "+i+"px)",0===i&&0===a||t.classList.add(r.default.isTranslated),e.firstPositions[t.id]||t.classList.add(r.default.entering)})}},{key:"playAnimation",value:function(e,t){var n=this,i=d.length,a=s.stateModule.getState("year"),o=a[0],u=a[2];function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=n,a=e.style.transform.match(/translate\((.*?)\)/),s=a?a[1].replace(" ","").split(",").map(function(e){return parseInt(e)}):[0,0];0===s[0]&&0===s[1]||0!==n&&1!==n&&3!==n||(e.classList.add(r.default.isMoving),e._tippy.show(0)),e.style.transitionDuration=t/1e3+"s",setTimeout(function(){var n=e._tippy.popper.style.transform.match(/translate3d\((.*?)\)/),a=n?n[1].replace(" ","").split(",").map(function(e){return parseInt(e)}):[0,0,0];0!==i&&1!==i&&3!==i||(e._tippy.popper.style.transitionDuration=t/1e3+"s",e._tippy.popper.style.transitionTimingFunction="ease-in-out"),window.requestAnimationFrame(function(){0!==i&&1!==i&&3!==i||(e._tippy.popper.style.transform="translate3d("+(parseInt(a[0])-parseInt(s[0]))+"px, "+(parseInt(a[1])-parseInt(s[1]))+"px, 0px)"),e.style.transform="translate(0px,0px)"}),setTimeout(function(){e.classList.remove(r.default.isMoving),e.classList.remove(r.default.isTranslated),e._tippy.popper.style.transitionDuration="0s",e._tippy.hide()},t)})}function c(e){if(i>0){var t=document.querySelectorAll("."+r.default.headerDiv)[i-1];e?t.classList.add(r.default.isAnimating):t.classList.remove(r.default.isAnimating)}}function h(e){var n=this,a=t?500:0;c(!0),this.disableYearButtons();var r=Object.keys(this.previousStatuses).filter(function(e){return n.previousStatuses[e].column===i}),d=Array.from(this.nonEmptyDrugs).filter(function(e){return r.includes(e.id)}),f=d.filter(function(e){var t=n.model.unnestedData.find(function(t){return t.id===e.id})[o][u],i=e.style.transform.match(/translate\((.*?)\)/)?e.style.transform.match(/translate\((.*?)\)/)[1].replace(" ","").split(","):[0,0];return e.translateXY=i,n.previousStatuses[e.id].column===t.column&&n.previousStatuses[e.id].isDiscontinued===t.isDiscontinued&&("0px"!==i[0]||"0px"!==i[1])}),v=d.filter(function(e){return n.previousStatuses[e.id].isDiscontinued!==n.model.unnestedData.find(function(t){return t.id===e.id})[o][u].isDiscontinued}),y=[d.filter(function(e){return 0!==n.previousStatuses[e.id].column&&n.previousStatuses[e.id].column<n.model.unnestedData.find(function(t){return t.id===e.id})[o][u].column}),d.filter(function(e){return n.previousStatuses[e.id].column>n.model.unnestedData.find(function(t){return t.id===e.id})[o][u].column}),f,v,d.filter(function(e){return 0===n.previousStatuses[e.id].column})];y.reduce(function(e,t){return e+t.length},0);function m(n){var r=this,o=n;new Promise(function(e){0===y[o].length?e(!0):y[o].forEach(function(n,i,r){var s=2===o?p/12:4===o?p/1.5:p,u=2===o?.5*s*i:4===o?.1*s*i:s*i;if(t||(s=0,u=0),setTimeout(function(){l(n,s,o)},u),i===r.length-1){var c=4===o?2*s+a:2===o?0:s*(i+1)+a;t||(c=0),setTimeout(function(){e(!0)},c)}})}).then(function(){if(++n<y.length)m.call(r,n);else if(i>0)c(!1),i--,h.call(r,e);else{setTimeout(function(){r.enableYearButtons(),r.enablePlayButton(),s.stateModule.getState("year")[0]==r.model.years[r.model.years.length-1]&&(c(!1),r.showReplayOption()),s.stateModule.getState("isPaused")?(c(!1),r.removePauseOption(),r.enableYearButtons()):(c(!1),e(!0))},0)}})}setTimeout(function(){m.call(n,0)},a)}f?(this.nonEmptyDrugs.forEach(function(e){l(e,0)}),f=!1):(Array.from(this.nonEmptyDrugs).filter(function(e){return!Object.keys(n.previousStatuses).includes(e.id)}).forEach(function(e){n.previousStatuses[e.id]={column:0,isDiscontinued:!1}}),new Promise(function(e){h.call(n,e)}).then(function(){var t;t=0,e&&setTimeout(function(){e(!0)},t)}))}}]),t}();t.default=h},function(e,t,n){e.exports={container:"src-views-viz-view--container",superSquat:"src-views-viz-view--superSquat",activeContainer:"src-views-viz-view--activeContainer",headerContainer:"src-views-viz-view--headerContainer",squat:"src-views-viz-view--squat",column:"src-views-viz-view--column",discontinuedContainer:"src-views-viz-view--discontinuedContainer",drug:"src-views-viz-view--drug",drugEmpty:"src-views-viz-view--drugEmpty",isTranslated:"src-views-viz-view--isTranslated",novel:"src-views-viz-view--novel",urgent:"src-views-viz-view--urgent",gramNegative:"src-views-viz-view--gramNegative",wasDiscontinued:"src-views-viz-view--wasDiscontinued",isMoving:"src-views-viz-view--isMoving",headerDiv:"src-views-viz-view--headerDiv",isAnimating:"src-views-viz-view--isAnimating",phaseFull:"src-views-viz-view--phaseFull",phaseAbbr:"src-views-viz-view--phaseAbbr",controlContainer:"src-views-viz-view--controlContainer",playButton:"src-views-viz-view--playButton",yearButton:"src-views-viz-view--yearButton",inputWrapper:"src-views-viz-view--inputWrapper",pause:"src-views-viz-view--pause",replay:"src-views-viz-view--replay",willPause:"src-views-viz-view--willPause",pauseSpinner:"src-views-viz-view--pauseSpinner",yearButtonActive:"src-views-viz-view--yearButtonActive",inputLabel:"src-views-viz-view--inputLabel"}},,,,,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),s=(i=r)&&i.__esModule?i:{default:i};var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),a(t,[{key:"prerender",value:function(){var e=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prerender",this).call(this);return this.name="VisuallyHidden",this.prerendered&&!this.rerender?e:(e.classList.add("visually-hidden"),this.model.data.forEach(function(t){var n=document.createElement("h2");e.appendChild(n),n.textContent=t.year,t.observations[0].forEach(function(n){var i=document.createElement("h3");i.textContent=4===n.phase?"New drug application":5===n.phase?"Approved":"Phase "+n.phase,e.appendChild(i),["Active","Inactive"].forEach(function(i,a){var r=document.createElement("h4");r.textContent=i,e.appendChild(r);var s=document.createElement("ul");n.values.filter(function(e){return 0===a?!e[t.year][0].isDiscontinued:e[t.year][0].isDiscontinued}).forEach(function(e){var t=document.createElement("li");t.textContent=e.name+" ("+e.company+")",s.appendChild(t)}),e.appendChild(s)})})}),e)}},{key:"init",value:function(){}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(19),o=(i=s)&&i.__esModule?i:{default:i};var u=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.el=document.querySelector(t),Object.keys(n).forEach(function(e){i[e]=n[e]})}return r(e,[{key:"init",value:function(e){this.needsRouter&&(this.router=new o.default,this.router.init(e)),this.disableHoverOnTouch()}},{key:"disableHoverOnTouch",value:function(){var e=!1,t=document.body,n=0;function i(){new Date-n<500||e||(t.classList.add("has-hover"),e=!0)}document.addEventListener("touchstart",function(){n=new Date},!0),document.addEventListener("touchstart",function(){e&&(t.classList.remove("has-hover"),e=!1)},!0),document.addEventListener("mousemove",i,!0),i()}},{key:"createComponent",value:function(e,t,n,i){var r=Object.create({children:[],data:null,model:e,parent:null,rerenderOnDataMismatch:!1});if(null!==i&&"object"===(void 0===i?"undefined":a(i)))for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return new t(n,r)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e){var t=this;if(void 0===e||"object"!==(void 0===e?"undefined":i(e)))throw"router.init method requires a config object as parameter 1";if("function"!=typeof e.encode||"function"!=typeof e.decode||!Array.isArray(e.views)||"object"!==i(e.PS))throw"routerOptions object needs encode, decode, views, and PS properties. encode and decode must be functions; views is an array of views from the app; PS needs to be the PubSub setter.";this.stateObj={},this.hashState=e.encode,this.decodeHash=e.decode,this.viewPromises=e.views.map(function(e){return e.isReady}),this.PS=e.PS,Promise.all(this.viewPromises).then(function(){t.decodeHash()}),this.PS.setSubs(e.subscriptions.map(function(e){return[e,function(e,n){t.hashChange.call(t,e,n)}]}))}},{key:"hashChange",value:function(e,t){this.setStateObj(e,t),this.hashState(),this.replaceState()}},{key:"setStateObj",value:function(e,t){this.stateObj[e]=t}},{key:"replaceState",value:function(){window.history.replaceState(this.stateObj,"",this.hashString)}}]),e}();t.default=r},function(e,t){e.exports='<section id="intro">\n    <div class="js-inner-content">\n    </div>\n</section>\n<section id="section-comparison">\n    <div class="js-inner-content">\n        <h2>Antibiotics in Development Since 2014</h2>\n        <div class="abx-legend">\n            <div class="abx-legend--wrapper">\n                <p class="abx-legend--item abx-legend--item--abx">Antibiotic</p>\n                <p class="abx-legend--item abx-legend--item--urgent">Expected to treat CDC urgent pathogen</p>\n            </div>\n            <div class="abx-legend--wrapper">\n                <p class="abx-legend--item abx-legend--item--novel">Novel antibiotics</p>\n                <p class="abx-legend--item abx-legend--item--gram">Expected to treat Gram-negative bacteria</p>\n            </div>\n        </div>\n        <div id="abx-visualization">\n        </div>\n        <div id="abx-totals">\n            <p>Total <strong>approved</strong> antibiotics <span class="since-2014">since 2014</span>: <span id="total-approved" class="total-span"></span></p>\n            <p>Total <strong>discontinued</strong> antibiotics <span class="since-2014">since 2014</span>: <span id="total-discontinued" class="total-span"></span></p>\n        </div>\n        <a name="summary" id="summary"></a>\n        <div id=visually-hidden-container>\n\n        </div>\n    </div>\n</section>\n<div id="abx-notes"></div>\n<footer class="download-resources">\n    <div>\n        <p class="flex"><strong>Resources: </strong>\n            <span class="flex">\n                <a class="pct-download" href="https://www.pewtrusts.org/en/research-and-analysis/issue-briefs/2019/03/tracking-the-global-pipeline-of-antibiotics-in-development">Methodology</a>\n                <a class="pct-download" href="https://www.pewtrusts.org/en/research-and-analysis/data-visualizations/2014/antibiotics-currently-in-clinical-development">Report</a>\n            </span>\n        </p>\n    </div>\n</footer>'},function(e,t){e.exports='<p>The Pew Charitable Trusts has tracked the pipeline of antibiotics in clinical development since 2014 and has aggregated updates into an interactive tool that illustrates trends in the pipeline—as drugs are either approved, discontinued from development, or remain stagnant. This longitudinal assessment underscores the long-standing concerns of scientists, doctors, public health officials, and other stakeholders regarding the dangerously low number of antibiotics in development to address current and future patient needs, particularly for treating the most urgent bacterial threats, such as Gram-negative pathogens, and those prioritized by the <a href="https://www.cdc.gov/drugresistance/biggest_threats.html">Centers for Disease Control and Prevention</a> and the <a href="https://www.who.int/news-room/detail/27-02-2017-who-publishes-list-of-bacteria-for-which-new-antibiotics-are-urgently-needed">World Health Organization</a>.</p>\n<p>Click the play button to see the evolution of the antibiotic pipeline since 2014, or click on an individual year to see the status of the pipeline at a particular point in time. (To view without animation, uncheck the “animate change” box.) To see additional information about each drug, hover over or tap any of the rectangles.</p>\n<p class="visually-hidden">Visually impaired users may wish to skip to <a href="#summary">the summary of the content</a>.</p>'},function(e,t){e.exports='<p><strong>Notes:</strong> Candidates included in this data visualization are consistent with Pew’s methodology for tracking antibiotics in clinical development. The analysis captures the status of antibiotics in the pipeline beginning in 2014, including those approved by the FDA that year. More information about methodology and the full underlying data can be found in <a href="https://www.pewtrusts.org/en/research-and-analysis/data-visualizations/2014/antibiotics-currently-in-clinical-development">Pew’s latest pipeline analysis</a>. This interactive tool is updated annually. </p>\n'},function(e,t,n){}]);
//# sourceMappingURL=indexjs.map