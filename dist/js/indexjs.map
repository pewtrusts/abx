{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/viz-view/styles.scss?28c4","webpack:///./submodules/UTILS/index.js","webpack:///./src/data/abx-data.csv","webpack:///./submodules/UI-js/element/index.js","webpack:///./submodules/PCTApp-js/index.js","webpack:///./src/partials/sections.html","webpack:///./src/partials/intro.md","webpack:///./src/partials/notes.md","webpack:///./submodules/ROUTR/index.js","webpack:///./src/views/viz-view/index.js","webpack:///./src/abx.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","container","superSquat","activeContainer","headerContainer","column","discontinuedContainer","squat","drug","drugEmpty","novel","urgent","gramNegative","detailDrawer","headerDiv","phaseFull","phaseAbbr","controlContainer","playButton","yearButton","isPaused","yearButtonActive","observation","observation0","observation1","GTMPush","eventLabel","dataLayer","event","eventData","publishWindowResize","S","resizeTimeout","addEventListener","setTimeout","setState","document","documentElement","clientWidth","clientHeight","FadeInText","HTMLElement","fadeOutContent","this","classList","add","fadeInContent","content","_this","durationS","style","transition","Promise","resolve","durationStr","getComputedStyle","getPropertyValue","duration","parseFloat","innerHTML","remove","StringHelpers","String","cleanString","replace","toLowerCase","removeUnderscores","undoCamelCase","trunc","useWordBoundary","subString","substr","lastIndexOf","hashCode","hash","charCodeAt","DOMHelpers","indexOf","classStrings","match","idString","elString","el","createElement","forEach","klass","setAttribute","q","querySelector","qa","querySelectorAll","_Utils","Element","selector","options","_classCallCheck","model","parent","renderToSelector","$d","children","rerender","rerenderOnDataMismatch","isMismatched","prerender","arguments","isReady","reject","existing","prerendered","_Router","PCTApp","keys","option","routerOptions","needsRouter","router","Router","init","disableHoverOnTouch","hasHoverClass","body","lastTouchTime","enableHover","Date","component","_options","_typeof","undefined","encode","decode","Array","isArray","views","PS","stateObj","hashState","decodeHash","viewPromises","map","each","all","then","setSubs","subscriptions","msg","hashChange","setStateObj","replaceState","history","hashString","minUnitDimension","headerHeight","unitPadding","headers","VizView","phaseMembers","active","discontinued","heightNeeded","maxActive","maxDiscontinued","view","super","renderColumns","cont","placeholderNumber","placeholder","appendChild","type","years","year","textContent","phase","toUpperCase","populatePlaceholders","yearIndex","JSON","parse","stringify","k","observations","getPhaseMembersIndex","id","filtered","values","filter","isDiscontinued","sort","a","b","existingIndexA","existingIndexB","drawer","company","addIdsAndClasses","checkHeight","update","nonEmptyDrugs","initializeYearButtons","initializePlayButton","playYears","currentYear","getState","nextPromise","wrapperResolve","contains","innerHeight","offsetHeight","root","activeMax","Math","floor","setProperty","button","blur","btn","FLIP","parseInt","updateText","totalActive","totalDiscontinued","reduce","acc","cur","approvedSpan","discontinuedSpan","recordFirstPositions","clearAttributesAndDetails","invertPositions","playAnimation","firstPositions","from","getBoundingClientRect","details","className","removeChild","transitionDuration","lastPosition","deltaY","top","deltaX","left","transform","entering","startYear","getRuntimeData","publicPath","IS_PRERENDERING","PUBLICPATH","appContainer","Papa","download","dynamicTyping","header","fastMode","skipEmptyLines","beforeFirstChunk","chunk","dataHash","toString","getAttribute","complete","response","loopWhile","index","unnestedData","split","activeLengths","discontinuedLengths","obs","max","createComponent","error","App","insertAdjacentHTML","sections","intro","notes"],"mappings":"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","file":"js/index.js?v=e1265b","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([16,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"src-views-viz-view--container\",\"superSquat\":\"src-views-viz-view--superSquat\",\"activeContainer\":\"src-views-viz-view--activeContainer\",\"headerContainer\":\"src-views-viz-view--headerContainer\",\"column\":\"src-views-viz-view--column\",\"discontinuedContainer\":\"src-views-viz-view--discontinuedContainer\",\"squat\":\"src-views-viz-view--squat\",\"drug\":\"src-views-viz-view--drug\",\"drugEmpty\":\"src-views-viz-view--drugEmpty\",\"novel\":\"src-views-viz-view--novel\",\"urgent\":\"src-views-viz-view--urgent\",\"gramNegative\":\"src-views-viz-view--gramNegative\",\"detailDrawer\":\"src-views-viz-view--detailDrawer\",\"headerDiv\":\"src-views-viz-view--headerDiv\",\"phaseFull\":\"src-views-viz-view--phaseFull\",\"phaseAbbr\":\"src-views-viz-view--phaseAbbr\",\"controlContainer\":\"src-views-viz-view--controlContainer\",\"playButton\":\"src-views-viz-view--playButton\",\"yearButton\":\"src-views-viz-view--yearButton\",\"isPaused\":\"src-views-viz-view--isPaused\",\"yearButtonActive\":\"src-views-viz-view--yearButtonActive\",\"observation\":\"src-views-viz-view--observation\",\"observation0\":\"src-views-viz-view--observation0\",\"observation1\":\"src-views-viz-view--observation1\"};","/* global dataLayer */\nexport function GTMPush(eventLabel) {\n    if (dataLayer) {\n        dataLayer.push({ 'event': 'Interactive Click', 'eventData': eventLabel });\n    }\n}\nexport function publishWindowResize(S) { // need to pass in the StateModule\n    window.addEventListener(\"resize\", resizeThrottler, false);\n\n    var resizeTimeout;\n\n    function resizeThrottler() { // adapted from https://developer.mozilla.org/en-US/docs/Web/Events/resize#setTimeout\n        // ignore resize events as long as an actualResizeHandler execution is in the queue\n        if (!resizeTimeout) {\n            resizeTimeout = setTimeout(function() {\n                actualResizeHandler();\n                resizeTimeout = null;\n            }, 350);\n        }\n    }\n\n    function actualResizeHandler() {\n        \n        S.setState('resize', [document.documentElement.clientWidth, document.documentElement.clientHeight]);\n    }\n}\nexport const FadeInText = (function(){\n    HTMLElement.prototype.fadeOutContent = function(){\n         this.classList.add('no-opacity');\n    };\n    HTMLElement.prototype.fadeInContent = function(content, s){\n        var durationS = s || 0;\n        if ( s ){\n            this.style.transition = 'opacity ' + s + 's ease-in-out';\n        }\n        return new Promise((resolve) => {\n            var durationStr = window.getComputedStyle(this).getPropertyValue('transition-duration') || durationS,\n                duration = parseFloat(durationStr) * 1000;\n            this.fadeOutContent();\n            setTimeout(() => {\n                this.innerHTML = content;\n                this.classList.remove('no-opacity');\n                resolve(true);\n            }, duration);\n        });\n    };\n})();\nexport const StringHelpers = (function(){\n    String.prototype.cleanString = function() { // lowercase and remove punctuation and replace spaces with hyphens; delete punctuation\n        return this.replace(/[ /]/g,'-').replace(/['\"”’“‘,.!?;()&:]/g,'').toLowerCase();\n    };\n\n    String.prototype.removeUnderscores = function() { \n        return this.replace(/_/g,' ');\n    };\n\n    String.prototype.undoCamelCase = function() {\n        return this.replace(/([A-Z])/g, ' $1').toLowerCase();\n    };\n\n    String.prototype.trunc = String.prototype.trunc || // ht https://stackoverflow.com/a/1199420\n         function( n, useWordBoundary ){\n             if (this.length <= n) { return this; }\n             var subString = this.substr(0, n-1);\n             return (useWordBoundary \n                ? subString.substr(0, subString.lastIndexOf(' ')) \n                : subString) + \"...\";\n          };\n\n    String.prototype.hashCode = function() {\n      var hash = 0, i, chr;\n      if (this.length === 0) return hash;\n      for (i = 0; i < this.length; i++) {\n        chr   = this.charCodeAt(i);\n        hash  = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n      }\n      return hash;\n    };\n})()\n\nexport const DOMHelpers = {\n c:  (s) => {\n     \n     if ( s.indexOf('.') !== -1 || s.indexOf('#') !== -1 ){\n         let classStrings = s.match(/\\.([^#.]*)/g) || [];\n         let idString = s.match(/#([^.]*)/);\n         let elString = s.match(/^([^.#]+)/);\n         \n         \n         let el = document.createElement(elString[0]);\n         classStrings.forEach(klass => {\n            el.classList.add(klass.replace('.',''));\n         });\n         if ( idString !== null ){\n            el.setAttribute('id', idString[1]);\n         }\n         return el;\n     }\n     return document.createElement(s);\n },\n q:  (s) => document.querySelector(s),\n qa: (s) => document.querySelectorAll(s)\n}\n","module.exports = __webpack_public_path__ + \"data/abx-data.csv?v=3d4592\";","import { DOMHelpers as $d } from '@Utils';\nexport default class Element {\n    constructor(selector, options){\n        if ( typeof selector !== 'string' ){\n            throw `First parameter must be a string referencing the CSS-like selector of the element to be created \n                    (\"div#divID.divClass\").`;\n        } \n        this.selector = selector;\n        this.model = options.model;\n        this.parent = options.parent; // parent is a JS object\n        this.renderToSelector = options.renderToSelector;\n        this.container = $d.q(this.renderToSelector);\n        this.children = options.children;\n        this.rerender = ( options.rerenderOnDataMismatch && options.model.isMismatched );\n        this.data = options.data;\n        \n        this.el = this.prerender(arguments); // will call the instance's prerender\n        this.isReady = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        \n    }\n    prerender(){\n        \n        var existing = $d.q(this.selector);\n        if ( existing && !this.rerender ) {\n                // ie is existing and no need to rerender\n            this.prerendered = true;\n            \n            return existing;\n        } else if ( existing ) { // ie is existing but there is a need to rerender\n            \n            existing.innerHTML = '';\n            return existing;\n        }\n        var el = $d.c(this.selector);\n        return el;\n    }\n    init(){\n        \n    }\n}","import Router from '@Router';\nexport default class PCTApp {\n    constructor(container, options){\n        this.container = container;\n        this.el = document.querySelector(container);\n        Object.keys(options).forEach(option => {\n            this[option] = options[option];\n        });\n    }\n    init(routerOptions){\n        if ( this.needsRouter ){ // comes from options object\n            this.router = new Router();\n            this.router.init(routerOptions);\n        }\n        this.disableHoverOnTouch();\n    }\n    disableHoverOnTouch(){\n    // HT: https://stackoverflow.com/a/30303898\n        var hasHoverClass = false;\n        var container = document.body;\n        var lastTouchTime = 0;\n\n        function enableHover() {\n            // filter emulated events coming from touch events\n            if (new Date() - lastTouchTime < 500) return;\n            if (hasHoverClass) return;\n\n            container.classList.add('has-hover');\n            hasHoverClass = true;\n        }\n\n        function disableHover() {\n            if (!hasHoverClass) return;\n            container.classList.remove('has-hover');\n            hasHoverClass = false;\n        }\n\n        function updateLastTouchTime() {\n            lastTouchTime = new Date();\n        }\n\n        document.addEventListener('touchstart', updateLastTouchTime, true);\n        document.addEventListener('touchstart', disableHover, true);\n        document.addEventListener('mousemove', enableHover, true);\n\n        enableHover();\n    }\n    createComponent(model, component, selector, _options){ \n        var options = Object.create({\n            children: [],\n            data: null,\n            model,\n            parent: null,\n            rerenderOnDataMismatch: false\n        });\n        if ( _options !== null && typeof _options === 'object' ){\n            for ( let key in _options ){\n                if ( _options.hasOwnProperty(key) ){\n                    options[key] = _options[key];\n                }\n            }\n        }\n        \n        return new component(selector, options);\n    }\n}","module.exports = \"<section id=\\\"intro\\\">\\n    <div class=\\\"js-inner-content\\\">\\n    </div>\\n</section>\\n<section id=\\\"section-comparison\\\">\\n    <div class=\\\"js-inner-content\\\">\\n        <h2>Antibiotics in Development Since 2014</h2>\\n        <div class=\\\"abx-legend\\\">\\n            <div class=\\\"abx-legend--wrapper\\\">\\n                <p class=\\\"abx-legend--item abx-legend--item--abx\\\">Antibiotic</p>\\n                <p class=\\\"abx-legend--item abx-legend--item--urgent\\\">Potential to treat CDC urgent pathogen</p>\\n            </div>\\n            <div class=\\\"abx-legend--wrapper\\\">\\n                <p class=\\\"abx-legend--item abx-legend--item--novel\\\">Novel antibiotics</p>\\n                <p class=\\\"abx-legend--item abx-legend--item--gram\\\">Potential to treat Gram-negative bacteria</p>\\n            </div>\\n        </div>\\n        <div id=\\\"abx-visualization\\\">\\n        </div>\\n        <div id=\\\"abx-totals\\\">\\n            <p>Total approved antibiotics since 2014 / <span id=\\\"total-approved\\\" class=\\\"total-span\\\"></span></p>\\n            <p>Total discontinued antibiotics since 2014 / <span id=\\\"total-discontinued\\\" class=\\\"total-span\\\"></span></p>\\n        </div>\\n    </div>\\n</section>\\n<div id=\\\"abx-notes\\\"></div>\\n<footer class=\\\"download-resources\\\">\\n    <div>\\n        <p><strong>Download resources:</strong>\\n            <a class=\\\"pct-download\\\" href=\\\"\\\">Methodology</a>\\n            <a class=\\\"pct-download\\\" href=\\\"\\\">Report</a>\\n        </p>\\n    </div>\\n</footer>\";","module.exports = \"<h2 id=\\\"antibiotic-innovation\\\">Antibiotic Innovation</h2>\\n<p>The Pew Charitable Trusts has tracked the pipeline of antibiotics in clinical development since 2014 and has aggregated the\\nupdates into an interactive tool that illustrates trends in the pipeline. This longitudinal data visualization underscores the longstanding concerns of scientists, doctors, public health officials, and other stakeholders regarding the dangerously low number of antibiotics in development to address current and future patient needs, particularly for treating the most urgent bacterial threats, such as Gram-negative pathogens.</p>\\n<p>Click the play button to see the evolution of the antibiotic pipeline since 2014, or click on an individual year to see the status of the pipeline at a particular point in time. To see additional information about each drug, hover over any of the [rectangles].</p>\\n\";","module.exports = \"<p><strong>Notes:</strong> Clinical candidates included in this data visualization are consistent with Pew’s methodology for tracking antibiotics in clinical development. More information about the methods and the full underlying data can be found in the latest analysis of the pipeline. Pew’s updates are conducted semiannually, except for 2014, when they were published quarterly, and 2018, when a timeline adjustment resulted in just one update for the year.</p>\\n\";","export default class Router { // this could be integrated with stateful dead\n    /*\n    Router offers basic shared functions for all routers. Methods for updating  history state and updating the hash url. Array of subscriptions\n    that affect the url is passed in. The PubSub module is passed in. setHash and decodeHash functions are passed in bc they will be diff\n    for each app. views are passed in so that the resolutions of their promises can be tracked and acted upon (ie router decodes only after \n    all views are ready)\n    */\n    init(routerOptions){\n        \n        if ( routerOptions === undefined || typeof routerOptions !== 'object' ){\n            throw 'router.init method requires a config object as parameter 1'\n        }\n        if ( typeof routerOptions.encode !== 'function' || typeof routerOptions.decode !== 'function' || !Array.isArray(routerOptions.views) || typeof routerOptions.PS !== 'object' ){\n            throw 'routerOptions object needs encode, decode, views, and PS properties. encode and decode must be functions; views is an array of views from the app; PS needs to be the PubSub setter.'\n        }\n        this.stateObj = {};\n        this.hashState = routerOptions.encode;\n        this.decodeHash = routerOptions.decode;\n        this.viewPromises = routerOptions.views.map(each => each.isReady); // view.isReady is a promised resolved true after the view is rendered\n        this.PS = routerOptions.PS;\n        \n        Promise.all(this.viewPromises).then(() => {\n            \n            this.decodeHash();\n        });\n        this.PS.setSubs(routerOptions.subscriptions.map(each => { // subscriptions that matter for router are made to trigger hashChange method when published\n            var arr = [each, (msg,data) => {\n                this.hashChange.call(this,msg,data);\n            }];\n            \n            return arr;\n        }));\n    }\n    hashChange(msg,data){\n        this.setStateObj(msg,data);\n        this.hashState();\n        this.replaceState();\n    }\n    setStateObj(msg, data){\n        this.stateObj[msg] = data;\n        \n    }\n    replaceState(){    \n        window.history.replaceState(this.stateObj,'',this.hashString)\n    }\n\n}","import Element from '@UI/element';\nimport s from './styles.scss';\nimport { stateModule as S } from 'stateful-dead';\nimport PS from 'pubsub-setter';\nconsole.log(s);\nconst minUnitDimension = 30; // minimum px height/width accepted for touchable element\nconst headerHeight = 1.5 * minUnitDimension; // the height of the phase-heading bars relative to minUnitDimension\nconst unitPadding = 2;\nconst headers = [\n    ['Phase 1', 'P1'],\n    ['Phase 2', 'P2'],\n    ['Phase 3', 'P3'],\n    ['Application', 'NDA'],\n    ['Approved', '&#10004']\n];\n\n\nexport default class VizView extends Element {\n    prerender() { // this prerender is called as part of the super constructor\n        /* any children need to be instatiated here */\n\n        this.minUnitDimension = minUnitDimension;\n        this.headerHeight = headerHeight;\n        this.unitPadding = unitPadding;\n        this.headers = headers;\n        this.phaseMembers = [0,1].map(() => {\n            return headers.map(() => { // will keep track of which drugs are in which column so that animations can be timed and so that \n                                       // drugs that stay in their column from one step to another can be placed before those entering the\n                                       // column\n                return {\n                    active: [],\n                    discontinued: []\n                };\n            });\n        });   \n            console.log(this.phaseMembers);                                                                    // plus one to acct fo discontinued header                     51 for totals  90 for legend 61 for sticky header 40 for toolbar\n        this.heightNeeded = ( this.model.maxActive + this.model.maxDiscontinued + 1 ) * ( this.minUnitDimension + this.unitPadding ) + this.headerHeight + this.unitPadding + 51 + 90 + 61 + 40;\n        //container\n        var view = super.prerender();\n        if (this.prerendered && !this.rerender) {\n            return view; // if prerendered and no need to render (no data mismatch)\n        }\n\n\n        function renderColumns(cont) {\n            for (let i = 0; i < 5; i++) {\n                let column = document.createElement('div');\n                column.classList.add(s.column);\n                let placeholderNumber = cont.name === s.activeContainer ? this.model.maxActive : this.model.maxDiscontinued;\n                for (let j = 0; j < placeholderNumber; j++) {\n                    let placeholder = document.createElement('div');\n                    placeholder.classList.add(s.drug, s.drugEmpty);\n                    column.appendChild(placeholder);\n                }\n                cont.appendChild(column);\n            }\n        }\n\n        // controls\n        var controlContainer = document.createElement('div');\n        controlContainer.classList.add(s.controlContainer);\n\n            // playButton\n            var playButton = document.createElement('button');\n            playButton.classList.add(s.playButton);\n            playButton.type = \"button\";\n            controlContainer.appendChild(playButton);\n\n            //years\n            this.model.years.forEach((year, i) => {\n                var yearButton = document.createElement('button');\n                yearButton.classList.add(s.yearButton, `${ i === 0 ? s.yearButtonActive : 'nope'}`);\n                yearButton.type = \"button\";\n                yearButton.value = year;\n                yearButton.textContent = year;\n                controlContainer.appendChild(yearButton);\n            });\n\n        view.appendChild(controlContainer);\n\n        // container\n        var container = document.createElement('div');\n        container.classList.add(s.container);\n        view.appendChild(container);\n\n        // active container\n        var activeContainer = document.createElement('div');\n        activeContainer.classList.add(s.activeContainer);\n        activeContainer.name = s.activeContainer;\n        container.appendChild(activeContainer);\n\n        // header container\n        var headerContainer = document.createElement('div');\n        headerContainer.classList.add(s.headerContainer);\n        headerContainer.name = s.headerContainer;\n        headers.forEach(phase => {\n            var headerDiv = document.createElement('div');\n            headerDiv.classList.add(s.headerDiv);\n            headerDiv.innerHTML = `<span class=\"${s.phaseFull}\">${phase[0].toUpperCase()}</span><span class=\"${s.phaseAbbr}\">${phase[1]}</span>`;\n            headerContainer.appendChild(headerDiv);\n        });\n        container.appendChild(headerContainer);\n\n        // discontinued container\n        var discontinuedContainer = document.createElement('div');\n        discontinuedContainer.classList.add(s.discontinuedContainer);\n        discontinuedContainer.name = s.discontinuedContainer;\n        container.appendChild(discontinuedContainer);\n\n        // columns\n        renderColumns.call(this, activeContainer);\n        renderColumns.call(this, discontinuedContainer);\n\n\n\n        return view;\n    }\n    populatePlaceholders(yearIndex, observation) {\n        function addIdsAndClasses(placeholder, drug){\n            function appendDetails(){\n                var drawer = document.createElement('div');\n                drawer.classList.add(s.detailDrawer);\n                drawer.innerHTML = `<strong>${drug.name}</strong><br />\n                                    ${drug.company}`;\n                placeholder.appendChild(drawer);   \n            }\n            placeholder.id = drug.id;\n            placeholder.classList.remove(s.drugEmpty);\n            placeholder.classList.add(`${ drug.gramNegative ? s.gramNegative : 'nope' }`, `${ drug.novel ? s.novel : 'nope' }`, `${ drug.urgent ? s.urgent : 'nope' }`);\n            appendDetails()\n        }\n        var activeContainer = document.querySelector('.' + s.activeContainer),\n            discontinuedContainer = document.querySelector('.' + s.discontinuedContainer);\n\n        // copy index 1 of phaseMembers to index 0. JSON parse/stringify to make deep copy\n        this.phaseMembers[0] = JSON.parse(JSON.stringify(this.phaseMembers[1]));\n        \n        [activeContainer, discontinuedContainer].forEach((container, k) => {\n            this.model.data[yearIndex].observations[observation].forEach((phase, i) => {\n                function getPhaseMembersIndex(id){\n                    return this.phaseMembers[1][i][ ( k === 0 ? 'active' : 'discontinued' ) ].indexOf(id)   \n                }\n                // filter drugs by whether they're active or discontinued; also sort them based on whether they were already in the column\n                //  they are about to be placed in\n                var filtered = phase.values.filter(d => k === 0 ? !d[this.model.years[yearIndex]][observation].isDiscontinued : d[this.model.years[yearIndex]][observation].isDiscontinued).sort((a, b) => {\n                        var existingIndexA = getPhaseMembersIndex.call(this, a.id),\n                            existingIndexB = getPhaseMembersIndex.call(this, b.id);\n                        console.log('a existing index a, b', existingIndexA, existingIndexB);\n                        if ( existingIndexB < 0 && existingIndexA >= 0 ) { // if drug is entering the column, ie, not already in it\n                            return -1;\n                        }\n                        if (existingIndexA < 0 && existingIndexB >= 0 ) {\n                            return 1;\n                        }\n                        if ( getPhaseMembersIndex.call(this, a.id) < getPhaseMembersIndex.call(this, b.id) ) { \n                            return -1;\n                        }\n                        if ( getPhaseMembersIndex.call(this, a.id) > getPhaseMembersIndex.call(this, b.id) ) { \n                            return 1;\n                        }\n                        return 0;\n                    }),\n                    column = container.querySelectorAll('.' + s.column)[i];\n                console.log(filtered)\n                \n                // clear the phaseMember array now that its previous contents have been utilized\n                this.phaseMembers[1][i][ ( k === 0 ? 'active' : 'discontinued' ) ].length = 0;\n                filtered.forEach((drug, j) => {\n                    var placeholder = column.querySelectorAll('.' + s.drug)[j];\n                    addIdsAndClasses(placeholder, drug);\n                    this.phaseMembers[1][i][ ( k === 0 ? 'active' : 'discontinued' ) ].push(drug.id); // place the drug in the proper bucket tracking its column\n                });\n            });\n        });\n        console.log(this.phaseMembers);\n    }\n    init() {\n        PS.setSubs([\n            ['resize', this.checkHeight.bind(this)],\n            ['year', this.update.bind(this)]\n        ]);\n        S.setState('year', [this.model.years[0], null, 1]);\n        this.nonEmptyDrugs = document.querySelectorAll('.' + s.drug + ':not(.' + s.drugEmpty + ')');\n        this.checkHeight();\n        this.initializeYearButtons();\n        this.initializePlayButton();\n    }\n    initializePlayButton(){\n        var playButton = document.querySelector('.' + s.playButton);\n        playButton.addEventListener('click', this.playYears.bind(this));\n    }\n    playYears(){\n        var currentYear = S.getState('year')[0],\n            currentObservation = document.querySelector('.' + s.yearButtonActive).classList.contains(s.observation0) ? 0 : 1;\n        function nextPromise(){\n            currentYear++;\n            if ( currentYear <= this.model.years[this.model.years.length - 1] ){\n                new Promise(wrapperResolve => {\n                    new Promise(resolve => {\n                        S.setState('year', [currentYear, resolve, 0]); \n                    }).then(() => {\n                        S.setState('year', [currentYear, wrapperResolve, 1])\n                    });    \n                }).then(() => {\n                    nextPromise.call(this);\n                });\n            \n            }\n        }\n        if ( currentObservation === 0 ){\n            new Promise(resolve => {\n                S.setState('year', [currentYear, resolve, 1]); \n            }).then(() => {\n                nextPromise.call(this);\n            });\n        } else {\n            nextPromise.call(this);\n        } \n\n    }\n    checkHeight() {\n\n        console.log('needed', this.heightNeeded);\n        console.log('available', window.innerHeight);\n        /* add 'squat' class to body for small screens */\n        if (window.innerHeight < this.heightNeeded) {\n            document.body.classList.add(s.squat);\n        } else {\n            document.body.classList.remove(s.squat);\n        }\n        if ( document.querySelector('#section-comparison .js-inner-content').offsetHeight > window.innerHeight - 100 ) {\n            document.body.classList.add(s.superSquat);\n        } else {\n            document.body.classList.remove(s.superSquat);\n        }\n\n        function adjustCSSVariables() {\n            var root = document.documentElement;\n            var activeMax = Math.floor((this.heightNeeded - this.unitPadding - this.headerHeight) * (this.maxActive / (this.maxActive + this.maxDiscontinued)));\n            root.style.setProperty('--unit-dimension', this.minUnitDimension + 'px');\n            root.style.setProperty('--header-height', this.headerHeight + 'px');\n            root.style.setProperty('--max-container-height', this.heightNeeded + 'px');\n            root.style.setProperty('--active-max-height', activeMax + 'px');\n            root.style.setProperty('--discontinued-max-height', Math.floor(this.heightNeeded - activeMax - this.headerHeight) + 'px');\n\n            /*\n            :root {\n                --max-container-height: 800px;\n                --active-max-height: 368px;\n                --discontinued-max-height: 368px;\n                --squat-active-proportion: 50vh;\n                --squat-discontinued-proportion: 50vh;\n                --unit-dimension: 30px;\n                --header-height: 45px;\n            }\n\n            */\n        }\n        adjustCSSVariables.call(this);\n    }\n    initializeYearButtons(){\n        document.querySelectorAll('.' + s.yearButton).forEach(button => {\n            console.log(button);\n            button.addEventListener('click', function(){\n                var currentYear = S.getState('year')[0];\n                this.blur();\n                if ( currentYear !== this.value ) { // is not the already selected button\n                    let observations = this.value > currentYear ? [0,1] : [1,0];\n                    \n                    new Promise(resolve => {\n                        S.setState('year', [this.value, resolve, observations[0]]);\n                    }).then(() => {\n                        S.setState('year', [this.value, null, observations[1]]);\n                    });\n                } else {\n                    let observation = this.classList.contains(s.observation0) ? 1 : 0;\n                    S.setState('year', [this.value, null, observation]);   \n                }\n            });\n        });\n    }\n    update(msg,data) { // here data is an array. [0]: year; [1]: null or `resolve` from the Promise. needs to resolve true when all transitions of current update are finished . 3. observation index\n        let toBeDeselected = document.querySelector('.' + s.yearButtonActive);\n        toBeDeselected.classList.remove(s.yearButtonActive, s.observation, s.observation0, s.observation1);\n        var btn = document.querySelector('button[value=\"' + data[0] +'\"]');\n        btn.classList.add(s.yearButtonActive);\n        if ( data[2] === 0 ){\n            btn.classList.remove(s.observation1);\n        } else {\n            btn.classList.remove(s.observation0);\n        }\n        btn.classList.add(s.observation, s['observation' + data[2]])\n        this.FLIP(parseInt(data[0]), data[1], data[2]);\n        this.updateText();\n    }\n    updateText(){\n        // phaseMembers[1] is the current state; [0] is the previous state\n        \n        var totalActive = this.phaseMembers[1][this.phaseMembers[1].length - 1].active.length,\n            totalDiscontinued = this.phaseMembers[1].reduce((acc,cur) => {\n                return acc + cur.discontinued.length;\n            },0),\n            approvedSpan = document.querySelector('#total-approved'),\n            discontinuedSpan = document.querySelector('#total-discontinued');\n        if ( approvedSpan.innerHTML != totalActive) {\n            document.querySelector('#total-approved').fadeInContent(totalActive);\n        }\n        if ( discontinuedSpan.innerHTML != totalDiscontinued ) {\n            document.querySelector('#total-discontinued').fadeInContent(totalDiscontinued);\n        }\n    }\n    FLIP(data, resolve, observation = 1){ // obnservation defaults to 1 for the initial page load animation\n        this.recordFirstPositions(); // first\n        this.clearAttributesAndDetails();\n\n        // params 1. index of the year (2014 -> 0); 2. index of the observation; \n        this.populatePlaceholders(this.model.years.indexOf(data), observation); // last  \n        this.nonEmptyDrugs = document.querySelectorAll('.' + s.drug + ':not(.' + s.drugEmpty + ')');\n        console.log(this.firstPositions);\n        //setTimeout(() => {\n            this.invertPositions();\n            this.playAnimation(resolve); // pass in the `resolve` function from the promise initiated when the year button was pressed or Play loop cycled\n        //    }, 3000); // invert and play\n        // ***** TO DO ****** INVERSION isn't working properly. need to remove classes *and* remove details drawers before repopulating\n        // the placeholders. why is there a transition on the invert? are the id's being assign properly?\n    }\n    recordFirstPositions(){\n        this.firstPositions = Array.from(document.querySelectorAll('.' + s.drug + ':not(' + s.drugEmpty + ')')).reduce((acc, cur) => {\n            \n            acc[cur.id] = cur.getBoundingClientRect();\n            return acc;\n        },{});\n    }\n    clearAttributesAndDetails(){\n        this.nonEmptyDrugs.forEach(drug => {\n            var details = drug.querySelector('.' + s.detailDrawer);\n            drug.className =  `${s.drug} ${s.drugEmpty}`;\n            drug.id = '';\n            drug.removeChild(details);\n        });\n    }\n    invertPositions(){\n        this.nonEmptyDrugs.forEach(drug => {\n            drug.style.transitionDuration = '0s';\n            var lastPosition = drug.getBoundingClientRect(),\n                deltaY = this.firstPositions[drug.id] ? this.firstPositions[drug.id].top - lastPosition.top : -1000,\n                deltaX = this.firstPositions[drug.id] ? this.firstPositions[drug.id].left - lastPosition.left : -1000; // drugs that are entering will not have firstPositions\n            drug.style.transform = `translate(${deltaX}px, ${deltaY}px)`;\n            if ( !this.firstPositions[drug.id] ){\n                drug.classList.add(s.entering);\n            }\n        });\n    }\n    playAnimation(resolve){\n        const duration = 500;\n        this.nonEmptyDrugs.forEach(drug => {\n            drug.style.transitionDuration = ( duration / 1000 ) + 's';\n            drug.style.transform = 'translate(0,0)';\n        });\n        if (resolve) {\n            setTimeout(function() {\n                resolve(true);\n            }, duration);\n        }\n        /*(console.log(this.phaseMembers);\n        const increment = 50;\n        var delay;\n        [4,3,2,1,0].forEach((phase, index) => {\n            if ( index === 0 ){\n                delay = 0;\n            }\n            else {\n                delay = this.phaseMembers[0][phase + 1].active.concat(this.phaseMembers[0][phase + 1].discontinued).length * increment + 500 + increment;\n            }\n            setTimeout(() => {\n                this.phaseMembers[0][phase].active.concat(this.phaseMembers[0][phase].discontinued).forEach((each, j) => {\n                    var el = document.querySelector('div#' + each );\n                    setTimeout(() => {\n                        el.style.transitionDuration = '0.5s';\n                        el.style.transform = 'translate(0,0)';\n                    }, increment * j);\n                });\n            }, delay);\n        });\n        document.querySelectorAll('.' + s.entering).forEach(drug => {\n            drug.style.transitionDuration = '0.5s';\n            drug.style.transform = 'translate(0,0)';\n        });*/\n        \n/****  TO DO ******\n\nassign classNames to drugs according to which way they are moving. progressing, regressing, discontinuing, entering, reentering\nprobably done up in loop starting an ln 141.\n\n        var animate = new Promise(function(resolve) {\n            ['foo','bar'].forEach((baz,i,array) => {\n                setTimeout(function(){\n                    console.log(baz);\n                    if ( i === array.length - 1 ){\n                        resolve(true);\n                    }\n                }, 1000 * i);\n            });\n        });\n        \n        animate.then(() => {\n            console.log('resolved');\n        });\n        /*  setTimeout(function(){ // transition won't happen w/o the setTimeout trick\n              drug.style.transitionDuration = '0.8s';\n              drug.style.transform = 'translate(0,0)';\n              ***** HERE *** CYCLE THROUGH columns one by one\n              document.querySelectorAll('.src-views-viz-view--column')[0].querySelectorAll('.src-views-viz-view--drug').forEach(drug => {drug.style.transitionDuration = '0.8s';drug.style.transform = 'translate(0,0)';});\n          });*/\n    }\n}","/* global PUBLICPATH process */\n//utils\n//import * as d3 from 'd3-collection';\nimport Papa from 'papaparse';\nimport { stateModule as S } from 'stateful-dead';\n//import PS from 'pubsub-setter';\nimport { publishWindowResize } from '@Utils';\n\n//data ( CSVs loaded by file-loader for use by Papaparse at build and runtime. that's set in webpack.common.js )\nimport data from './data/abx-data.csv';\n\n//views\nimport VizView from './views/viz-view/';\n//import FiftyStateView from './views/fifty-state/';\n\n// app prototype\nimport PCTApp from '@App';\n\n//static content\nimport sections from './partials/sections.html';\nimport intro from './partials/intro.md';\nimport notes from './partials/notes.md';\n\n\npublishWindowResize(S); // initialize publish window resize with StateMOdule as param/\n\nconst model = {\n    \n    // any static data should be made properties of the model now\n    \n};\n\nconst views = []; // views get push  nly after model is fully ready, with any runtime data loaded\nconst startYear = 2014;\n\nfunction getRuntimeData(){\n    var publicPath = '';\n    if ( process.env.NODE_ENV === 'production' && !window.IS_PRERENDERING ){ // production build needs to know the public path of assets\n                                                                             // for dev and preview, assets are a child of root; for build they\n                                                                             // are in some distant path on sitecore\n        publicPath = PUBLICPATH; // TODO: set PUBLICPATH using define plugin in webpack.build.js\n    }\n    return new Promise((resolve, reject) => {\n        var appContainer = this.el;\n        Papa.parse(publicPath + data, {\n            download: true,\n            dynamicTyping: true,\n            header: true,\n            fastMode: false, // string escapes needed to parse sringified arrays with commas\n            skipEmptyLines: true,\n            beforeFirstChunk(chunk){ // on prerender, do simple hash of CSV contents and append as attribute of the app container\n                                     // at runtime, do same hash of csv contents and compare to original. if hashes match, app will\n                                     // continue normally. if mismatched, app will rerender all components based on the new data.\n                                     // this allows for `hot` updating of the main data file without rebuilding the dist/ folder.\n                                     // `model.isMismatch` will be set to `true` and the prerendering functions will check that value\n                                     // and respond accordingly\n\n                var dataHash = chunk.hashCode(); // hashCode is helper function from utils, imported and IIFE'd in index.js\n                if ( window.IS_PRERENDERING ){\n                    appContainer.setAttribute('data-data-hash', dataHash);\n                } else if ( process.env.NODE_ENV !== 'development' && dataHash.toString() !== appContainer.getAttribute('data-data-hash') ){\n                    appContainer.setAttribute('data-data-mismatch',true);\n                    console.log('data mismatch');\n                    model.isMismatched = true; // set so that components can access this value \n                }\n            },\n            complete: response => { // arrow function here to keep `this` context as StateDebt\n                views.length = 0;  \n                model.years = [];\n                // find number of years in data. relies on all rows having the same number\n                var loopWhile = true,\n                index = 0;\n\n                // create array of years present in the data, starting with startYear defined above\n                while ( loopWhile ){\n                    if ( response.data[0].hasOwnProperty(startYear + index) ) {\n                        model.years.push(startYear + index);   \n                    } else {\n                        loopWhile = false;\n                    }\n                    index++\n                }\n                model.unnestedData = response.data.map(d => { // turn each string value like \"1-1d\" into an array , [1,1d]\n                    d.id = 'drug-' + d.id;\n                    model.years.forEach(year => {\n                        d[year] = [0,1].map(observation => {\n                            \n                            return {\n                                column: parseInt(d[year].split('-')[observation]),\n                                isDiscontinued: ( d[year].split('-')[observation].toString().indexOf('d') !== -1 )\n                            };\n                        });\n                    });\n                    return d;\n                });\n                model.data = model.years.map(year => {\n                    return {\n                        year,\n                        observations: [0,1].map(observation => { // each year has two observations\n                            return [1, 2, 3, 4, 5].map(phase => {\n                                \n                                return {\n                                    phase,\n                                    values: model.unnestedData.filter(d => d[year][observation].column === phase) \n                                };\n                            });\n                        })\n                    };\n                });\n                console.log(model);\n                const activeLengths = [];\n                const discontinuedLengths = [];\n                // find the maximum number of nondiscontinued drugs in one column at any time. side effect pushes \n                // number of discontinued drugs to array for max tbd later\n                // these values will be used to determine when stacked drugs need to be collapsed down\n                // for smaller screens\n                model.data.forEach(d => {\n                    d.observations.forEach((obs,i) => {\n                        obs.forEach(phase => {\n                            activeLengths.push(phase.values.filter(drug => drug[d.year][i].isDiscontinued !== true).length);\n                            discontinuedLengths.push(phase.values.filter(drug => drug[d.year][i].isDiscontinued === true).length);\n                        });\n                    });\n                });\n                model.maxActive = Math.max(...activeLengths);\n                model.maxDiscontinued = Math.max(...discontinuedLengths);\n                console.log(model);\n               \n                /* push views now that model is complete */\n                \n                views.push(\n                   this.createComponent(model, VizView, 'div#viz-view', {renderToSelector: '#abx-visualization', rerenderOnDataMismatch: true, parent: this})\n                   // this.createComponent(model, FiftyStateView, 'div#fifty-state-view', {renderToSelector: '#section-states .js-inner-content', rerenderOnDataMismatch: true, parent: this})  \n                );\n                \n                resolve(true);\n            },\n            error: function(error){\n                reject(error);\n            }\n        });\n    });\n}\n\nexport default class ABXApp extends PCTApp {\n    prerender(){\n\n        //indsert any static content here\n        this.el.insertAdjacentHTML('beforeend', sections);\n        document.querySelector('#intro').insertAdjacentHTML('afterbegin', intro );\n        document.querySelector('#abx-notes').insertAdjacentHTML('afterbegin', notes );\n        //this.wasPrerendered = false;\n        getRuntimeData.call(this).then(() => { // bind StateDebt as context `this` for getRuntimeData so that it can acceess this.el, etc\n            \n            views.forEach(view => {\n                console.log(view);\n          /* ? */      view.container.appendChild(view.el); // different here from CapeTown: views aren't appended to app container; some static content\n                                                     // is present already. views appended to *their* containers\n            });\n            //this.container.classList.add('rendered');\n        });\n    }\n    init(){\n        super.init();\n       // this.attachSectionOpenClose();\n        getRuntimeData.call(this).then(() => {\n            views.forEach(view => {\n               view.init(this);                    \n            });\n        });                                \n\n/*        if ( module.hot ){\n            let that = this;\n            module.hot.accept('./views/state-comparison', () => {\n                console.log('accept!', arguments, that);\n                document.querySelector('#section-comparison .js-inner-content').innerHTML = '';\n                var replacement = that.createComponent(model, ComparisonView, 'div#comparison-view', {renderToSelector: '#section-comparison .js-inner-content', rerenderOnDataMismatch: true});\n                console.log(replacement);\n                replacement.container.appendChild(replacement.el);\n\n            });\n        } */\n    }\n}","/* global process */\n/*eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"StringHelpers|FadeInText\" }]*/ //allow StringHelpers to be iported (defined) and not being explicitly called\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// without triggering eslint error\nimport { StringHelpers, FadeInText } from '@Utils'; // string helpers is an IIFE\nimport ABXApp from './abx.js';\nimport './css/styles.scss';\n\n\nconst container = '#pew-app';\nconst App = new ABXApp(container, { // StateDebt extends PCTApp-js. PCTApp-js's constructor method is called, p1 contaiuner, p2 options\n\tneedsRouter: false\n});\nif ( process.env.NODE_ENV === 'development' || window.IS_PRERENDERING ){ // process development means using WebPack dev server. window is prerendering means in\n\tApp.prerender();\n}\nApp.init();"],"sourceRoot":""}